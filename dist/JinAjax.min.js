+function(){"use strict";var t=function(t){this.obj=t,this.init()};t.prototype.getParam=function(){this.obj=this.obj||{},this.obj.methods=this.obj.methods||"GET",this.obj.methods=this.obj.methods.toUpperCase(),this.obj.url=this.obj.url||"",this.obj.data=this.obj.data||null,this.obj.header=this.obj.header||null,this.obj.timeout=this.obj.timeout||1e4,this.obj.success=this.obj.success||function(t){console.log(t)},this.obj.error=this.obj.error||function(t){console.log(t)},this.obj.before=this.obj.before||function(){},this.timeoutBool=!1},t.prototype.getXHR=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var t=["Microsoft","msxm3","msxml2","msxml1"],o=0;o<t.length;o++)try{var e=t[o]+".XMLHTTP";return new ActiveXObject(e)}catch(t){console.log("error ajax",t)}},t.prototype.timeOutSet=function(t){var o=this,e=setTimeout(function(){o.obj.error("request timeout more than "+o.obj.timeout+"ms"),o.timeoutBool=!0,t.abort()},o.obj.timeout);return e},t.prototype.setHeader=function(t){for(var o in this.obj.header)t.setRequestHeader(o,this.obj.header[o])},t.prototype.createXHR=function(){var t=this,o=this.getXHR();o.open(this.obj.methods,this.obj.url,this.obj.async);var e=this.timeOutSet(o);this.setHeader(o),o.onreadystatechange=function(){if(4===o.readyState){if(t.timeoutBool)return;if(clearTimeout(e),o.status>=200&&o.status<300||304==o.status){var s=o.responseText;try{o.responseText&&(s=JSON.parse(s)),obj.success(s)}catch(t){obj.error(o)}}else obj.error(o)}},o.send("GET"===obj.methods?null:obj.data)},t.prototype.init=function(){this.getParam(),this.obj.before(),this.createXHR()},window.JinAjax=t}();